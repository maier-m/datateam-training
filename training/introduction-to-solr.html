<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>NCEAS Data Team Training</title>
  <meta name="description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects">
  <meta name="generator" content="bookdown 0.7.8 and GitBook 2.6.7">

  <meta property="og:title" content="NCEAS Data Team Training" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  <meta name="github-repo" content="rstudio/datateam-training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="NCEAS Data Team Training" />
  
  <meta name="twitter:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  

<meta name="author" content="Jeanette Clark, Jesse Goldstein, Dominic Mullen, Bryce Mecum, Matt Jones, Peter Slaughter, Irene Steves, Mitchell Maier">


<meta name="date" content="2018-05-04">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="using-rt.html">
<link rel="next" href="nesting-a-data-package.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="../styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Team Training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to NCEAS!</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#first-day-to-dos"><i class="fa fa-check"></i><b>1.1</b> First day to-dos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#account-information"><i class="fa fa-check"></i><b>1.2</b> Account information</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#nceas-events"><i class="fa fa-check"></i><b>1.3</b> NCEAS Events</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html"><i class="fa fa-check"></i><b>2</b> Introduction to open science</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#open-science-background-reading"><i class="fa fa-check"></i><b>2.1</b> Open science background reading</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#effective-data-management"><i class="fa fa-check"></i><b>2.2</b> Effective data management</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#using-dataone"><i class="fa fa-check"></i><b>2.3</b> Using DataONE</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#working-on-a-remote-server"><i class="fa fa-check"></i><b>2.4</b> Working on a remote server</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#cyberduck-instructions"><i class="fa fa-check"></i><b>2.5</b> Cyberduck instructions</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-paths"><i class="fa fa-check"></i><b>2.6</b> A note on paths</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-scripts"><i class="fa fa-check"></i><b>2.7</b> A note on scripts</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#exercise-1"><i class="fa fa-check"></i><b>2.8</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html"><i class="fa fa-check"></i><b>3</b> Create data packages in R</a><ul>
<li class="chapter" data-level="3.1" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#what-is-in-a-package"><i class="fa fa-check"></i><b>3.1</b> What is in a package?</a></li>
<li class="chapter" data-level="3.2" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#about-identifiers"><i class="fa fa-check"></i><b>3.2</b> About identifiers</a></li>
<li class="chapter" data-level="3.3" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#uploading-packages-using-r"><i class="fa fa-check"></i><b>3.3</b> Uploading packages using R</a></li>
<li class="chapter" data-level="3.4" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#set-dataone-nodes"><i class="fa fa-check"></i><b>3.4</b> Set DataONE nodes</a><ul>
<li class="chapter" data-level="3.4.1" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#test-nodes"><i class="fa fa-check"></i><b>3.4.1</b> Test nodes</a></li>
<li class="chapter" data-level="3.4.2" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#production-nodes"><i class="fa fa-check"></i><b>3.4.2</b> Production nodes</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#publish-an-object"><i class="fa fa-check"></i><b>3.5</b> Publish an object</a></li>
<li class="chapter" data-level="3.6" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#create-a-resource-map"><i class="fa fa-check"></i><b>3.6</b> Create a resource map</a></li>
<li class="chapter" data-level="3.7" data-path="create-data-packages-in-r.html"><a href="create-data-packages-in-r.html#exercise-2"><i class="fa fa-check"></i><b>3.7</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="update-a-data-package.html"><a href="update-a-data-package.html"><i class="fa fa-check"></i><b>4</b> Update a data package</a><ul>
<li class="chapter" data-level="4.1" data-path="update-a-data-package.html"><a href="update-a-data-package.html#get-package-and-eml"><i class="fa fa-check"></i><b>4.1</b> Get package and EML</a></li>
<li class="chapter" data-level="4.2" data-path="update-a-data-package.html"><a href="update-a-data-package.html#update-an-object"><i class="fa fa-check"></i><b>4.2</b> Update an object</a></li>
<li class="chapter" data-level="4.3" data-path="update-a-data-package.html"><a href="update-a-data-package.html#update-a-package"><i class="fa fa-check"></i><b>4.3</b> Update a package</a><ul>
<li class="chapter" data-level="4.3.1" data-path="update-a-data-package.html"><a href="update-a-data-package.html#updating-metadata"><i class="fa fa-check"></i><b>4.3.1</b> Updating metadata</a></li>
<li class="chapter" data-level="4.3.2" data-path="update-a-data-package.html"><a href="update-a-data-package.html#updating-data"><i class="fa fa-check"></i><b>4.3.2</b> Updating data</a></li>
<li class="chapter" data-level="4.3.3" data-path="update-a-data-package.html"><a href="update-a-data-package.html#publish-update"><i class="fa fa-check"></i><b>4.3.3</b> Publish update</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="update-a-data-package.html"><a href="update-a-data-package.html#exercise-3"><i class="fa fa-check"></i><b>4.4</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="explore-eml.html"><a href="explore-eml.html"><i class="fa fa-check"></i><b>5</b> Explore EML</a><ul>
<li class="chapter" data-level="5.1" data-path="explore-eml.html"><a href="explore-eml.html#navigate-through-eml"><i class="fa fa-check"></i><b>5.1</b> Navigate through EML</a></li>
<li class="chapter" data-level="5.2" data-path="explore-eml.html"><a href="explore-eml.html#understand-the-eml-schema"><i class="fa fa-check"></i><b>5.2</b> Understand the EML schema</a><ul>
<li class="chapter" data-level="5.2.1" data-path="explore-eml.html"><a href="explore-eml.html#access-specific-elements"><i class="fa fa-check"></i><b>5.2.1</b> Access specific elements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html"><i class="fa fa-check"></i><b>6</b> Editing EML in R</a><ul>
<li class="chapter" data-level="6.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-an-eml-element"><i class="fa fa-check"></i><b>6.1</b> Edit an EML element</a><ul>
<li class="chapter" data-level="6.1.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-eml-with-strings"><i class="fa fa-check"></i><b>6.1.1</b> Edit EML with strings</a></li>
<li class="chapter" data-level="6.1.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-eml-with-eml"><i class="fa fa-check"></i><b>6.1.2</b> Edit EML with EML</a></li>
<li class="chapter" data-level="6.1.3" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-eml-with-objects"><i class="fa fa-check"></i><b>6.1.3</b> Edit EML with objects</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-attributelists"><i class="fa fa-check"></i><b>6.2</b> Edit attributeLists</a><ul>
<li class="chapter" data-level="6.2.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-attributes"><i class="fa fa-check"></i><b>6.2.1</b> Edit Attributes</a></li>
<li class="chapter" data-level="6.2.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-custom-units"><i class="fa fa-check"></i><b>6.2.2</b> Edit Custom Units</a></li>
<li class="chapter" data-level="6.2.3" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-factors"><i class="fa fa-check"></i><b>6.2.3</b> Edit Factors</a></li>
<li class="chapter" data-level="6.2.4" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#finalize-attributelist"><i class="fa fa-check"></i><b>6.2.4</b> Finalize attributeList</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-physical"><i class="fa fa-check"></i><b>6.3</b> Set physical</a></li>
<li class="chapter" data-level="6.4" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-datatables"><i class="fa fa-check"></i><b>6.4</b> Edit dataTables</a></li>
<li class="chapter" data-level="6.5" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#edit-otherentities"><i class="fa fa-check"></i><b>6.5</b> Edit otherEntities</a><ul>
<li class="chapter" data-level="6.5.1" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#remove-otherentities"><i class="fa fa-check"></i><b>6.5.1</b> Remove otherEntities</a></li>
<li class="chapter" data-level="6.5.2" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#create-otherentities"><i class="fa fa-check"></i><b>6.5.2</b> Create otherEntities</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-coverages"><i class="fa fa-check"></i><b>6.6</b> Set coverages</a></li>
<li class="chapter" data-level="6.7" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-methods"><i class="fa fa-check"></i><b>6.7</b> Set methods</a></li>
<li class="chapter" data-level="6.8" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#set-parties"><i class="fa fa-check"></i><b>6.8</b> Set parties</a></li>
<li class="chapter" data-level="6.9" data-path="editing-eml-in-r.html"><a href="editing-eml-in-r.html#exercise-4"><i class="fa fa-check"></i><b>6.9</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="system-metadata.html"><a href="system-metadata.html"><i class="fa fa-check"></i><b>7</b> System metadata</a><ul>
<li class="chapter" data-level="7.1" data-path="system-metadata.html"><a href="system-metadata.html#edit-sysmeta"><i class="fa fa-check"></i><b>7.1</b> Edit sysmeta</a><ul>
<li class="chapter" data-level="7.1.1" data-path="system-metadata.html"><a href="system-metadata.html#identifiers-and-sysmeta"><i class="fa fa-check"></i><b>7.1.1</b> Identifiers and sysmeta</a></li>
<li class="chapter" data-level="7.1.2" data-path="system-metadata.html"><a href="system-metadata.html#additional-resources"><i class="fa fa-check"></i><b>7.1.2</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="system-metadata.html"><a href="system-metadata.html#set-rights-and-access"><i class="fa fa-check"></i><b>7.2</b> Set rights and access</a><ul>
<li class="chapter" data-level="7.2.1" data-path="system-metadata.html"><a href="system-metadata.html#exercise-5"><i class="fa fa-check"></i><b>7.2.1</b> Exercise 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html"><i class="fa fa-check"></i><b>8</b> Using Git in RStudio</a><ul>
<li class="chapter" data-level="8.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#introduction"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="8.1.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#so-why-do-i-need-to-use-this-again"><i class="fa fa-check"></i><b>8.1.1</b> So why do I need to use this again?</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#setting-up-git"><i class="fa fa-check"></i><b>8.2</b> Setting up git</a><ul>
<li class="chapter" data-level="8.2.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#cloning-the-arctic-data-repo"><i class="fa fa-check"></i><b>8.2.1</b> Cloning the arctic-data repo</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#working-with-the-repository"><i class="fa fa-check"></i><b>8.3</b> Working with the repository</a><ul>
<li class="chapter" data-level="8.3.1" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#adding-a-new-script"><i class="fa fa-check"></i><b>8.3.1</b> Adding a new script</a></li>
<li class="chapter" data-level="8.3.2" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#editing-a-script"><i class="fa fa-check"></i><b>8.3.2</b> Editing a script</a></li>
<li class="chapter" data-level="8.3.3" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#where-do-i-commit"><i class="fa fa-check"></i><b>8.3.3</b> Where do I commit?</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="using-git-in-rstudio.html"><a href="using-git-in-rstudio.html#my-git-tab-disappeared"><i class="fa fa-check"></i><b>8.4</b> My Git tab disappeared</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="using-rt.html"><a href="using-rt.html"><i class="fa fa-check"></i><b>9</b> Using RT</a><ul>
<li class="chapter" data-level="9.1" data-path="using-rt.html"><a href="using-rt.html#navigate-rt"><i class="fa fa-check"></i><b>9.1</b> Navigate RT</a><ul>
<li class="chapter" data-level="9.1.1" data-path="using-rt.html"><a href="using-rt.html#front-page"><i class="fa fa-check"></i><b>9.1.1</b> Front page</a></li>
<li class="chapter" data-level="9.1.2" data-path="using-rt.html"><a href="using-rt.html#all-tickets"><i class="fa fa-check"></i><b>9.1.2</b> All tickets</a></li>
<li class="chapter" data-level="9.1.3" data-path="using-rt.html"><a href="using-rt.html#example-ticket"><i class="fa fa-check"></i><b>9.1.3</b> Example ticket</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html"><i class="fa fa-check"></i><b>10</b> Introduction to Solr</a><ul>
<li class="chapter" data-level="10.1" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#construct-a-query"><i class="fa fa-check"></i><b>10.1</b> Construct a query</a></li>
<li class="chapter" data-level="10.2" data-path="introduction-to-solr.html"><a href="introduction-to-solr.html#query-solr-through-r"><i class="fa fa-check"></i><b>10.2</b> Query Solr through R</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html"><i class="fa fa-check"></i><b>11</b> Nesting a data package</a><ul>
<li class="chapter" data-level="11.1" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#introduction-1"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#create-a-new-parent-package"><i class="fa fa-check"></i><b>11.2</b> Create a new parent package</a></li>
<li class="chapter" data-level="11.3" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#add-children-to-an-existing-parent"><i class="fa fa-check"></i><b>11.3</b> Add children to an existing parent</a></li>
<li class="chapter" data-level="11.4" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#example"><i class="fa fa-check"></i><b>11.4</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="building-provenance.html"><a href="building-provenance.html"><i class="fa fa-check"></i><b>12</b> Building Provenance</a><ul>
<li class="chapter" data-level="12.1" data-path="building-provenance.html"><a href="building-provenance.html#introduction-2"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="building-provenance.html"><a href="building-provenance.html#the-prov-editor"><i class="fa fa-check"></i><b>12.2</b> The Prov Editor</a></li>
<li class="chapter" data-level="12.3" data-path="building-provenance.html"><a href="building-provenance.html#understanding-resource-maps"><i class="fa fa-check"></i><b>12.3</b> Understanding resource maps</a></li>
<li class="chapter" data-level="12.4" data-path="building-provenance.html"><a href="building-provenance.html#datapack"><i class="fa fa-check"></i><b>12.4</b> <code>datapack</code></a><ul>
<li class="chapter" data-level="12.4.1" data-path="building-provenance.html"><a href="building-provenance.html#fixing-mistakes"><i class="fa fa-check"></i><b>12.4.1</b> Fixing mistakes</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="building-provenance.html"><a href="building-provenance.html#references"><i class="fa fa-check"></i><b>12.5</b> References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://nceas.github.io/datateam-training/reference" target="blank">Reference Guide</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NCEAS Data Team Training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-solr" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Introduction to Solr</h1>
<p>Solr is what’s known as an index, which helps us keep track of the data, metadata, and resource map objects stored in our metadata catalog, <a href="https://www.dataone.org/software-tools/metacat">Metacat</a>.</p>
<p>Solr allows you to quickly search through any coordinating or member node. Some more common use-cases include:</p>
<ul>
<li><strong>Recovering lost pids</strong> - if you publish new data objects (<a href="https://nceas.github.io/datateam-training/training/create-data-packages-in-r.html#publish-an-object"><code>publish_object</code></a>) but forget to save the PIDs, you can recover them with a query. For example, you can search for all data objects that are <em>not</em> associated with a resource map <em>and</em> are published using your ORCID (<code>q=-resourceMap:*+AND+submitter:*XXXX-YYYY-ZZZZ-WWWW</code>)</li>
<li><strong>Working with groups of packages</strong> - if you want to find all data, metadata, and resource maps associated with a PI, you can use their last name (<code>q=origin:*SURNAME*</code>) or perhaps their ORCID (<code>q=rightsHolder:*XXXX-YYYY-ZZZZ-WWWW</code>) or both (<code>q=origin:*SURNAME*+OR+rightsHolder:*XXXX-YYYY-ZZZZ-WWWW</code>) to retrieve informatio about packages associated with them</li>
</ul>
<p>Once you understand the logic of queries, it becomes a flexible and useful tool that you can integrate into your R workflow. You can use queries to answer a variety of interesting questions, for example:</p>
<ul>
<li>What are the most recently updated datasets?</li>
<li>What metadata and data objects are in a given data package?</li>
<li>What is the total size (in terms of disk space) of all objects stored in Metacat?</li>
</ul>
<p>Querying Solr is possible <a href="https://nceas.github.io/datateam-training/reference/query-solr-via-a-browser.html">by adding a query onto the end of a base URL</a> or <a href="https://nceas.github.io/datateam-training/training/introduction-to-solr.html#query-solr-through-r">through the <code>dataone::query()</code> function in R</a>. For now, we’ll just cover the basics of Solr queries in R. See the <a href="https://nceas.github.io/datateam-training/reference/solr-queries.html">Data Team References</a> for more on Solr.</p>
<div id="construct-a-query" class="section level2">
<h2><span class="header-section-number">10.1</span> Construct a query</h2>
<p>Each Solr query is comprised of a number of parameters. These are like arguments to a function in R, but they are entered as parts of a URL.</p>
<p>The most common parameters are:</p>
<ul>
<li><code>q</code>: The query. This is like <code>subset</code> or <code>dplyr::filter</code> in R</li>
<li><code>fl</code>: What fields are returned for the documents that match your query (<code>q</code>). If not set, all fields are returned.</li>
<li><code>rows</code>: The maximum number of documents to return. Solr will truncate your result if the result size is greater than <code>rows</code>.</li>
<li><code>sort</code>: Sorts the result by the values in the given Solr field (e.g., sort by date uploaded)</li>
</ul>
<p>The query (‘q’) parameter uses a syntax that looks like <code>field:value</code>, where <code>field</code> is one of the Solr fields and <code>value</code> is an expression. The expression can match a specific value exactly, e.g., <code>q=identifier:arctic-data.7747.1</code> or <code>q=identifier:&quot;doi:10.5065/D60P0X4S&quot;</code>, which finds the Solr document for a specific Object by PID (identifier).</p>
<div class="note">
<p>
In the second example, the DOI PID is surrounded in double quotes. This is because Solr has <a href="https://lucene.apache.org/core/2_9_4/queryparsersyntax.html">reserved characters</a>, of which <code>:</code> is one, so we have to help Solr by surrounding values with reserved characters in them in quotes or escaping them.
</p>
</div>
<p>To view the list of query-able parameters on the Arctic Data Center and their descriptions, you can visit <a href="https://arcticdata.io/metacat/d1/mn/v2/query/solr" class="uri">https://arcticdata.io/metacat/d1/mn/v2/query/solr</a>.</p>
</div>
<div id="query-solr-through-r" class="section level2">
<h2><span class="header-section-number">10.2</span> Query Solr through R</h2>
<p>Though it’s possible to <a href="#query-solr">query Solr directly through its HTTP API</a>, we typically run our queries through R, for two main reasons:</p>
<ol style="list-style-type: decimal">
<li>The result is returned in a more useful way to R without extra work on your part</li>
<li>We can more easily pass our authentication token with the query</li>
</ol>
<p>Why does #2 matter?
Well by default, all of those URLs above only returned publicly-readable Solr documents.
If a private document matched any of those queries, Solr doesn’t give you any idea and acts like the non-public-readable documents don’t exist. So we must pass an authentication token to access non-public-readable content. This bit is crucial for working with the ADC, so you’ll very often want to use R instead of visiting those URLs in a web browser.</p>
<pre class="sourceCode r"><code class="sourceCode r">cn &lt;-<span class="st"> </span>dataone<span class="op">::</span><span class="kw">CNode</span>(<span class="st">&quot;PROD&quot;</span>)
mn &lt;-<span class="st"> </span>dataone<span class="op">::</span><span class="kw">getMNode</span>(cn, <span class="st">&quot;urn:node:ARCTIC&quot;</span>)
<span class="co"># Set your token if you need/want!</span>

<span class="co">#string your parameters together like this: dataone::query(mn, &quot;q=title:*soil*&amp;fl=title&amp;rows=10&quot;)</span>
<span class="co">#or alternatively, list them out:</span>
dataone<span class="op">::</span><span class="kw">query</span>(mn, <span class="kw">list</span>(<span class="dt">q=</span><span class="st">&quot;title:*soil*&quot;</span>,
                        <span class="dt">fl=</span><span class="st">&quot;title&quot;</span>,
                        <span class="dt">rows=</span><span class="st">&quot;10&quot;</span>))</code></pre>
<p>By default, <code>query</code> returns the result as a <code>list</code>, but a <code>data.frame</code> can be a more useful way to work with the result. To get a <code>data.frame</code> instead, just set the <code>as</code> argument to ‘data.frame’ to get a <code>data.frame</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">dataone<span class="op">::</span><span class="kw">query</span>(mn, <span class="kw">list</span>(<span class="dt">q=</span><span class="st">&quot;title:*soil*&quot;</span>,
                        <span class="dt">fl=</span><span class="st">&quot;title&quot;</span>,
                        <span class="dt">rows=</span><span class="st">&quot;10&quot;</span>),
               <span class="dt">as =</span> <span class="st">&quot;data.frame&quot;</span>)</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="using-rt.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="nesting-a-data-package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
